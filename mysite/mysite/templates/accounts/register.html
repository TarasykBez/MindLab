{% load static %}

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Реєстрація/Вхід</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />
</head>

<body class="body_login">
<div id="successMessage" class="message hide">Вітаємо! Ви успішно увійшли на сайт.</div>
<div class="container">
  <img class="logo_log" src="{% static 'img/logo.png' %}" alt="Фонова картинка" />

  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="form_action" id="formAction" value="signin" />
    <input checked="" id="signin" name="action" type="radio" value="signin" />
    <label class="label_login" for="signin">Увійдіть</label>
    <input id="signup" name="action" type="radio" value="signup" />
    <label class="label_login" for="signup">Реєстрація</label>
    <input id="reset" name="action" type="radio" value="reset" />
    <label class="label_login" for="reset">Новий пароль</label>

    {% if form %}
      <div id="wrapper">
        <div id="arrow"></div>

          <p>
            <input type="email" name="email" id="email" placeholder="Пошта" class="{{ form.email.field.widget.attrs.class }}" />
          </p>
          <p>
            <input type="password" name="password1" id="pass" placeholder="Пароль" class="{{ form.password1.field.widget.attrs.class }}" />
          </p>
        <p>
            <input type="password" name="password2" id="repass" placeholder="Повтор паролю" class="{{ form.password2.field.widget.attrs.class }}" />
        </p>
      </div>
    {% endif %}
    <button type="submit" id="submitBtn">
      <span>
        Скинути пароль
        <br />
        Увійти
        <br />
        Зареєструватися
      </span>
    </button>
  </form>

  <div id="error-container">
    {% if form.non_field_errors %}
      <div class="errors global-errors">{{ form.non_field_errors }}</div>
    {% endif %}
    {% if form.email.errors %}
      <div class="errors">{{ form.email.errors }}</div>
    {% endif %}
    {% if form.password1.errors %}
      <div class="errors">{{ form.password1.errors }}</div>
    {% endif %}
    {% if form.password2.errors %}
      <div class="errors">{{ form.password2.errors }}</div>
    {% endif %}
  </div>

  <div id="google-btn" class="hide">
    <button type="button">Увійти через Google</button>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    function adjustFormFields(action) {
      var emailField = document.getElementById('email');
      var password1Field = document.getElementById('pass');
      var password2Field = document.getElementById('repass');
      var formActionField = document.getElementById('formAction');

      emailField.style.display = 'block';
      password1Field.style.display = action === 'reset' ? 'none' : 'block';
      password2Field.style.display = action === 'signup' ? 'block' : 'none';
      formActionField.value = action;
    }


    document.querySelectorAll('input[name="action"]').forEach(function (radio) {
      radio.addEventListener('change', function (event) {
        adjustFormFields(event.target.value);
      });
    });


    adjustFormFields(document.querySelector('input[name="action"]:checked').value);
  });
</script>
</body>
